<?xml version="1.0" encoding="UTF-8"?>
<launch>
  <arg name="sim" default="false" />

  <!-- Launch the point cloud diagnostic -->
  <node name="point_cloud_diagnostic" pkg="assistance_arbitrator" type="point_cloud_diagnostic.py" />

  <!-- Launch each of the detectors / belief monitors -->
  <node name="base_collision_monitor" pkg="assistance_arbitrator" type="base_collision_monitor.py" />
  <node name="base_stall_monitor" pkg="assistance_arbitrator" type="base_stall_monitor.py" />
  <node name="battery_state_monitor" pkg="assistance_arbitrator" type="battery_state_monitor.py" />
  <node name="breaker_state_monitor" pkg="assistance_arbitrator" type="breaker_state_monitor.py" />
  <node name="costmap_monitor" pkg="assistance_arbitrator" type="costmap_monitor.py" />
  <node name="diagnostics_monitor" pkg="assistance_arbitrator" type="diagnostics_monitor.py" />
  <node name="global_plan_monitor" pkg="assistance_arbitrator" type="global_plan_monitor.py" />
  <node name="localization_monitor" pkg="assistance_arbitrator" type="localization_monitor.py" />
  <node name="moveit_monitor" pkg="assistance_arbitrator" type="moveit_monitor.py" />

  <node name="arm_pose_monitor" pkg="assistance_arbitrator" type="arm_pose_monitor.py" />
  <node name="gripper_closed_monitor" pkg="assistance_arbitrator" type="gripper_closed_monitor.py" />
  <node name="torso_raised_monitor" pkg="assistance_arbitrator" type="torso_raised_monitor.py" />

  <!-- Simulation only detectors / belief monitors -->
  <group if="$(arg sim)">
  </group>

  <!-- Robot only detectors / belief monitors -->
  <group unless="$(arg sim)">
    <node name="wifi_monitor" pkg="assistance_arbitrator" type="wifi_monitor.py" />
  </group>

  <!-- Launch the rosgraph monitor -->
  <node name="rosgrapher" pkg="rosprofiler" type="rosgrapher" />

  <!-- Launch the execution monitor -->
  <node name="execution_monitor" pkg="assistance_arbitrator" type="monitor_node.py" />

  <!-- Launch the arbitration server -->
  <node name="arbitrator" pkg="assistance_arbitrator" type="server_node.py" output="screen" />
</launch>
